---
---

<script is:inline>
	// figure out user's preferred theme and set it as html class for tailwind before paint
	function changeTheme() {
		if (typeof window === "undefined") return;
		const modeCircle = document.querySelector("#mode-circle");
		const storedTheme = sessionStorage.getItem("theme");
		const isSystemColorSchemeDark = window.matchMedia(
			"(prefers-color-scheme: dark)"
		).matches;

		if (storedTheme === "dark" || isSystemColorSchemeDark) {
			document.head.children.namedItem("theme-color").content = "#262626";
			modeCircle.classList.remove("light");
			modeCircle.classList.add("dark");
		} else {
			document.head.children.namedItem("theme-color").content = "#ffffff";
			document.documentElement.classList.remove("dark");
			modeCircle.classList.remove("dark");
			modeCircle.classList.add("light");
		}
	}

	changeTheme;

	document.addEventListener("astro:after-swap", changeTheme);
</script>
